<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="__PUBLIC__/admin/css/html5.css"/>
		<link rel="stylesheet" type="text/css"  href="__PUBLIC__/admin/font/iconfont.css">
		<link rel="stylesheet" type="text/css"  href="__PUBLIC__/admin/font/css/font-awesome.css">
		<link rel="stylesheet" type="text/css" href="__PUBLIC__/admin/css/index.css"/>
		<script src="__PUBLIC__/admin/js/jquery-1.10.2.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="__PUBLIC__/admin/js/icheck/icheck.js" type="text/javascript" charset="utf-8"></script>
		<link rel="stylesheet" type="text/css" href="__PUBLIC__/admin/js/icheck/square/green.css">
		<link href="__PUBLIC__/validform/Validform.css" rel="stylesheet" type="text/css" />
		<script type="text/javascript" src="__PUBLIC__/validform/Validform_v5.3.2.js"></script>
	</head>
	<body>
		<div class="right_min">
			<div class="crumbs_nav">
				<i class="iconfont icon-shouye"></i>
				<ul>
					<li><a href="{:U('index/welcome')}">首页</a></li>
					<li> > </li>
					<li><a href="javascript:void(0);">其他管理</a></li>
					<li> > </li>
					<li><a href="{:U('fwithdraw/index')}">厂家提现列表</a></li>
					<li> > </li>
					<li><a href="javascript:void(0);">申请提现</a></li>
				</ul>
			</div>
			<div class="min">
				<div class="form_box">
					<form name="myform" id="myform" action="{:U('fwithdraw/addinfo')}" method="post" onsubmit="return check()">
                        <div class="form-item">
							<label class="form-label">提现金额</label>
							<div class="form-text form-input-block">
								<input name="info[fwithdraw_amount]" id="fwithdraw_amount" type="text" class="dfinput"  maxlength="10" onkeyup="if(isNaN(value))execCommand('undo')"   />
                                <i  style="display:block;color:red;">  备注：提现金额不能超过账户余额（{$factory_money}元）</i>
                                <i class="aa6" style="display:none;color:red;">提现金额不能为空或为0，提现金额不大于账户余额</i>
							</div>
						</div>
						<div class="form-item">
							<label class="form-label">手续费</label>
							<div class="form-text form-input-block">
								<input  id="fwithdraw_amount" value="{$pop.set_value}" type="text" readonly/> 
							</div>
						</div>
                        <div class="form-item">
							<label class="form-label">银行卡名称</label>
							<div class="form-text form-input-block">
								<input name="info[fwithdraw_bank_bankname]" id="fwithdraw_bank_bankname" type="text" class="dfinput"  maxlength="20" />
								<i class="aa1" style="display:none;color:red;">银行卡名称不能为空</i>
							</div>
						</div>
                        <div class="form-item">
							<label class="form-label">银行卡卡号</label>
							<div class="form-text form-input-block">
								<input name="info[fwithdraw_bank_account]" id="fwithdraw_bank_account" type="text" class="dfinput"  maxlength="19" onkeyup='this.value=this.value.replace(/\D/gi,"")' />
								<i class="aa2" style="display:none;color:red;">请输入有效的银行卡卡号</i>
							</div>
						</div>
                        <div class="form-item">
							<label class="form-label">银行卡户主姓名</label>
							<div class="form-text form-input-block">
								<input name="info[fwithdraw_bank_usrname]" id="fwithdraw_bank_usrname" type="text" class="dfinput"  maxlength="20" />
								<i class="aa3" style="display:none;color:red;">银行卡户主姓名不能为空</i>
							</div>
						</div>
                        <div class="form-item">
							<label class="form-label">预留手机号</label>
							<div class="form-text form-input-block">
								<input name="info[fwithdraw_bank_tel]" id="fwithdraw_bank_tel" type="text" class="dfinput" maxlength="11" onkeyup='this.value=this.value.replace(/\D/gi,"")' />
								<i class="aa4" style="display:none;color:red;">请输入有效的预留手机号</i>
							</div>
						</div>
                        <div class="form-item">
							<label class="form-label">户主身份证号</label>
							<div class="form-text form-input-block">
								<input name="info[fwithdraw_bank_userid]" id="fwithdraw_bank_userid" type="text" class="dfinput"  maxlength="18" onkeyup='this.value=this.value.replace(/\D/gi,"")'/>
								<i class="aa5" style="display:none;color:red;">请输入有效的户主身份证号</i>
							</div>
						</div>
                        
                        <!--<input id="state" type="hidden" value="0"/>
						<div class="form-item">
							<label class="form-label">手续费</label>
							<div class="form-text form-input-block">
								<input name="info[pop_routine]" id="pop_routine" value="" type="text" class="dfinput" readonly/>
                                <i style="display:block;color:red;">备注：手续费{$pop_routine}%</i>
							</div>
						</div>
                        <div class="form-item">
							<label class="form-label">到帐金额</label>
							<div class="form-text form-input-block">
								<input name="info[pop_fact]" id="pop_fact" type="text" class="dfinput" value=""readonly />
							</div>
						</div>-->
                        <div class="form-item">
							<label class="form-label">备注说明</label>
							<div class="form-text form-input-block">
								<input name="info[fwithdraw_remark]" id="fwithdraw_remark" type="text" class="dfinput"   maxlength="50" />
                                <i class="aa7" style="display:none;color:red;">备注说明不能为空</i>
							</div>
						</div>
						<div class="form-item">
							<div class="form-button form-input-block">
								<input class="chaxun but" id="submit" type="submit" value="提交"/>
								<button class="but chongzhi" type="button" onclick="location.href='{:U('fwithdraw/index')}'">返回</button>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
	</body>
</html>
<script type="text/javascript">
	$(function(){
		$(".right_min").height($(window).height());
		
		$('.skin-section input').iCheck({
			checkboxClass: 'icheckbox_square-green',
			radioClass: 'iradio_square-green',
		});
		$('input').on('ifChecked', function(event){
		  //alert($(this).val());
		});
	});
    
   //获取最大值，最小值，手续费
    /*var pop_max=parseFloat({$pop_max});
    var pop_min=parseFloat({$pop_min});*/
    //var pop_routine=parseFloat({$pop_routine});
    var factory_money=parseFloat({$factory_money});

    function check(){
        //提现金额（最小金额<提现金额<最大金额）
        var fwithdraw_amount = parseFloat($("#fwithdraw_amount").val());
        if(fwithdraw_amount==''||fwithdraw_amount==0||fwithdraw_amount>factory_money||isNaN(fwithdraw_amount)){
            $(".aa6").show();
            $('#fwithdraw_amount').focus();
            return false;
        }
        $(".aa6").hide();
        
        //提现金额状态
        /*var state = $("#state").val();
        if(state==0){
            $(".aa6").show();
            $('#pop_money').focus();
            return false;
        }*/
        //银行卡名称
        var fwithdraw_bank_bankname = $("#fwithdraw_bank_bankname").val();
        if(fwithdraw_bank_bankname==''){
            $(".aa1").show();
            $('#fwithdraw_bank_bankname').focus();
            return false;
        }
        $(".aa1").hide();
		//银行卡卡号
        var pattern = /^([1-9]{1})(\d{14}|\d{18})$/;
        var fwithdraw_bank_account = $("#fwithdraw_bank_account").val();
        if(fwithdraw_bank_account==''||!pattern.test(fwithdraw_bank_account)){
            $(".aa2").show();
            $('#fwithdraw_bank_account').focus();
            return false;
        }
        $(".aa2").hide();
        //银行卡户主姓名
        var fwithdraw_bank_usrname = $("#fwithdraw_bank_usrname").val();
        if(fwithdraw_bank_usrname==''){
            $(".aa3").show();
            $('#fwithdraw_bank_usrname').focus();
            return false;
        }
        $(".aa3").hide();
        
        //预留手机号
        var phone=/^1(3|4|5|7|8|9)\d{9}$/;
        var fwithdraw_bank_tel = $("#fwithdraw_bank_tel").val();
        if(fwithdraw_bank_tel==''||!phone.test(fwithdraw_bank_tel)){
            $(".aa4").show();
            $('#fwithdraw_bank_tel').focus();
            return false;
        }
        $(".aa4").hide();
      
        //户主身份证号
        var fwithdraw_bank_userid = $("#fwithdraw_bank_userid").val();
       isidcard=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/; 
        if(!isidcard.test(fwithdraw_bank_userid) || fwithdraw_bank_userid==''){
            $(".aa5").show();
            $('#fwithdraw_bank_userid').focus();
            return false;
        }
        $(".aa5").hide();
        
        
        //备注说明
        var fwithdraw_remark = $("#fwithdraw_remark").val();
        if(fwithdraw_remark==''){
            $(".aa7").show();
            $('#fwithdraw_remark').focus();
            return false;
        }
        $(".aa7").hide();
        
		//提交按钮disable
		$('#submit').attr("disabled",true);
    }
    
   
</script>
